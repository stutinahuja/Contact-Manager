{"version":3,"file":"table-element.js","sourceRoot":"","sources":["../../src/table-element.ts"],"names":[],"mappings":"AAIA,OAAO,SAAS,MAAM,kBAAkB,CAAC;AAEzC,IAAA;IAQE,sBAAY,IAA8B;QACxC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC3B;IAED,6BAAM,GAAN;QACE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KAC7B;IAED,wCAAiB,GAAjB;QACE,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAC9B,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;YAChB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI;YACF,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KACxC;IAED,gCAAS,GAAT;QACE,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;KACzB;IAED,qCAAc,GAAd;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;YACjC,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;YACrC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;SAC1B;KACF;uBA5CH;IA6CC,CAAA;AAvCD,wBAuCC","sourcesContent":["import { FormGroup } from '@angular/forms';\r\n\r\nimport { TableDataSource } from './table-data-source';\r\n\r\nimport cloneDeep from 'lodash.clonedeep';\r\n\r\nexport class TableElement<T> {\r\n  id: number;\r\n  editing: boolean;\r\n  currentData?: T;\r\n  originalData: T;\r\n  source: TableDataSource<T>;\r\n  validator: FormGroup;\r\n\r\n  constructor(init: Partial<TableElement<T>>) {\r\n    Object.assign(this, init);\r\n  }\r\n\r\n  delete(): void {\r\n    this.source.delete(this.id);\r\n  }\r\n\r\n  confirmEditCreate(): boolean {\r\n    this.originalData = undefined;\r\n    if (this.id == -1)\r\n      return this.source.confirmCreate(this);\r\n    else\r\n      return this.source.confirmEdit(this);\r\n  }\r\n\r\n  startEdit(): void {\r\n    this.originalData = cloneDeep(this.currentData);\r\n    this.editing = true;\r\n    this.validator.enable();\r\n  }\r\n\r\n  cancelOrDelete(): void {\r\n    if (this.id == -1 || !this.editing)\r\n      this.delete();\r\n    else {\r\n      this.currentData = this.originalData;\r\n      this.editing = false;\r\n      this.validator.disable();\r\n    }\r\n  }\r\n}\r\n"]}